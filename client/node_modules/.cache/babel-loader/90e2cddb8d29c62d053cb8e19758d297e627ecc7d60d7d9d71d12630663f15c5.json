{"ast":null,"code":"import { $host, $authHost } from './index';\nimport { jwtDecode } from 'jwt-decode';\nexport const userRegistration = async (login, password, role) => {\n  try {\n    const {\n      data\n    } = await $host.post('api/user/registration', {\n      login,\n      password,\n      role\n    });\n    return \"2\";\n  } catch (error) {\n    if (error.response) {\n      return error.response.status;\n    } else {\n      return 500;\n    }\n  }\n};\nexport const loginFunc = async (login, password) => {\n  try {\n    const {\n      data\n    } = await $host.post('api/user/login', {\n      login,\n      password\n    });\n    localStorage.setItem('token', data.token);\n    return \"1\";\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const auth = async () => {\n  try {\n    const {\n      data\n    } = await $authHost.post('api/user/auth');\n    localStorage.setItem('token', data.token);\n    return jwtDecode(data.token);\n  } catch (error) {\n    console.log(error);\n  }\n};","map":{"version":3,"names":["$host","$authHost","jwtDecode","userRegistration","login","password","role","data","post","error","response","status","loginFunc","localStorage","setItem","token","console","log","auth"],"sources":["C:/Users/Серебряков/Desktop/react-note-board/client/src/http/UserAPI.ts"],"sourcesContent":["import { AxiosResponse } from 'axios';\r\nimport { $host, $authHost } from './index';\r\nimport { jwtDecode } from 'jwt-decode';\r\n\r\ninterface RegistrationResponse {\r\n  token: string;\r\n}\r\n\r\nexport const userRegistration = async (\r\n  login: string,\r\n  password: string,\r\n  role: string\r\n): Promise<any> => {\r\n  try {\r\n    const { data }: AxiosResponse<RegistrationResponse> = await $host.post('api/user/registration', {\r\n      login,\r\n      password,\r\n      role,\r\n    });\r\n    return \"2\"\r\n  } catch (error: any) {\r\n    if (error.response) {\r\n      return error.response.status;\r\n    } else {\r\n      return 500;\r\n    }\r\n  }\r\n};\r\n\r\ninterface LoginResponse {\r\n  token: string;\r\n}\r\n\r\nexport const loginFunc = async (login: string, password: string): Promise<any> => {\r\n  try {\r\n    const { data }: AxiosResponse<LoginResponse> = await $host.post('api/user/login', { login, password });\r\n    localStorage.setItem('token', data.token);\r\n    return \"1\";\r\n  } catch (error: any) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const auth = async (): Promise<any> => {\r\n  try {\r\n    const { data }: AxiosResponse<LoginResponse> = await $authHost.post('api/user/auth');\r\n    localStorage.setItem('token', data.token);\r\n    return jwtDecode(data.token);\r\n  } catch (error: any) {\r\n    console.log(error);\r\n  }\r\n};\r\n"],"mappings":"AACA,SAASA,KAAK,EAAEC,SAAS,QAAQ,SAAS;AAC1C,SAASC,SAAS,QAAQ,YAAY;AAMtC,OAAO,MAAMC,gBAAgB,GAAG,MAAAA,CAC9BC,KAAa,EACbC,QAAgB,EAChBC,IAAY,KACK;EACjB,IAAI;IACF,MAAM;MAAEC;IAA0C,CAAC,GAAG,MAAMP,KAAK,CAACQ,IAAI,CAAC,uBAAuB,EAAE;MAC9FJ,KAAK;MACLC,QAAQ;MACRC;IACF,CAAC,CAAC;IACF,OAAO,GAAG;EACZ,CAAC,CAAC,OAAOG,KAAU,EAAE;IACnB,IAAIA,KAAK,CAACC,QAAQ,EAAE;MAClB,OAAOD,KAAK,CAACC,QAAQ,CAACC,MAAM;IAC9B,CAAC,MAAM;MACL,OAAO,GAAG;IACZ;EACF;AACF,CAAC;AAMD,OAAO,MAAMC,SAAS,GAAG,MAAAA,CAAOR,KAAa,EAAEC,QAAgB,KAAmB;EAChF,IAAI;IACF,MAAM;MAAEE;IAAmC,CAAC,GAAG,MAAMP,KAAK,CAACQ,IAAI,CAAC,gBAAgB,EAAE;MAAEJ,KAAK;MAAEC;IAAS,CAAC,CAAC;IACtGQ,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEP,IAAI,CAACQ,KAAK,CAAC;IACzC,OAAO,GAAG;EACZ,CAAC,CAAC,OAAON,KAAU,EAAE;IACnBO,OAAO,CAACC,GAAG,CAACR,KAAK,CAAC;EACpB;AACF,CAAC;AAED,OAAO,MAAMS,IAAI,GAAG,MAAAA,CAAA,KAA0B;EAC5C,IAAI;IACF,MAAM;MAAEX;IAAmC,CAAC,GAAG,MAAMN,SAAS,CAACO,IAAI,CAAC,eAAe,CAAC;IACpFK,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEP,IAAI,CAACQ,KAAK,CAAC;IACzC,OAAOb,SAAS,CAACK,IAAI,CAACQ,KAAK,CAAC;EAC9B,CAAC,CAAC,OAAON,KAAU,EAAE;IACnBO,OAAO,CAACC,GAAG,CAACR,KAAK,CAAC;EACpB;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}